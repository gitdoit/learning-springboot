<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
请输入：<textarea rows="5" cols="10" id="inputMsg" name="inputMsg"></textarea>
<button onclick="doSend();">发送</button>
<script type="text/javascript" src="http://cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>
<script type="text/javascript" src="http://cdn.bootcss.com/sockjs-client/1.1.1/sockjs.js"></script>
<script>
    if ("WebSocket" in window){
        var websocket = new WebSocket("ws://192.168.6.49:8080/send");
        websocket.onopen = onOpen;
        websocket.onmessage = onMessage;
        websocket.onerror = onError;
        websocket.onclose = onClose;

        function onOpen(openEvt) {
            //alert(openEvt.Data);
            console.log(openEvt)
        }

        function onMessage(evt) {
            console.log(evt)
        }
        function onError() {}
        function onClose() {}

        function doSend() {
            if (websocket.readyState == websocket.OPEN) {
                var msg = document.getElementById("inputMsg").value;
                websocket.send(msg);//调用后台handleTextMessage方法
            } else {
                alert("连接失败!");
            }
        }
        window.close=function()
        {
            websocket.onclose();
        }
    }else {
        alert("不支持")
    }

</script>
</body>
</html>